#content.box.anchor
  %legend Manage Banners
  .section
    - if @banners.empty?
      %h5
        No banners in database, click
        = link_to 'here', new_banner_path
        to add one.
    - else
      %table
        %thead
          %th Name
          %th Created
        - @banners.each do |b|
          %tr
            %td= b.filename
            %td= b.created_at.getlocal.strftime('%Y.%m.%d')
            %td= link_to "Show", b.file.url
            %td= link_to 'Destroy', b, confirm: 'Are you sure?', method: :delete
      = add_new_button(new_banner_path, "New Banner")

  %legend Manage Pages
  .section
    %table
      %thead
        %th Name
        %th Permalink
        %th Visible
        %th
        %th
      - @roots.each do |r|
        %tr
          %td= link_to r.title, r
          %td= r.permalink
          %td= r.visible
          %td= link_to "Edit", edit_page_path(r)
        - @tree[r.title].each do |c|
          %tr{ class: 'sub-page', id: c.permalink }
            %td.bump
              = link_to c.title, c
              - if(c.title != @tree[r.title].first.title)
                %i.icon-circle-arrow-up.icon-white
              - if(c.title != @tree[r.title][-1].title)
                %i.icon-circle-arrow-down.icon-white
            %td= c.permalink
            %td= c.visible
            %td= link_to "Edit", edit_page_path(c)
    = add_new_button(new_page_path, "New Page")

  %legend Manage Resources
  .section
    - if @resources.empty?
      %h5
        No resources in database, click
        = link_to 'here', new_resource_path
        to add one.
    - else
      %table
        %thead
          %th Name
          %th Update On
        - @resources.each do |r|
          %tr
            %td= link_to r.filename, r.file.url
            %td= r.updated_at.getlocal.strftime('%Y.%m.%d')
            %td= link_to 'Destroy', r, confirm: 'Are you sure?', method: :delete
      = add_new_button(new_resource_path, "New Resource")

  %legend Manage Images
  .section
    - if @images.empty?
      %h5
        No images in database, click
        = link_to 'here', new_image_path
        to add one.
    - else
      %table
        %thead
          %th Name
          %th Update On
        - @images.each do |r|
          %tr
            %td= link_to r.filename, r.file.url
            %td= r.updated_at.getlocal.strftime('%Y.%m.%d')
            %td= link_to 'Show', r
            %td= link_to 'Destroy', r, confirm: 'Are you sure?', method: :delete
      = add_new_button(new_image_path, "New Image")

  %legend Manage Community Groups
  .section
    - if @community_groups.empty?
      %h5
        No community groups in database, click
        = link_to 'here', new_community_group_path
        to add one.
    - else
      %table
        %thead
          %th Name
          %th Meeting Day
          %th Time
          %th Description
        - @community_groups.each do |cg|
          %tr
            %td= cg.leaders.collect { |l| "#{l.first} #{l.last}" }.join(' ')
            %td= cg.meeting_day
            %td= cg.meeting_time.strftime('%Y.%m.%d')
            %td= cg.description
            %td= link_to 'Show', cg
            %td= link_to 'Destroy', cg, confirm: 'Are you sure?', method: :delete
      = add_new_button(new_community_group_path, "New Community Group")
